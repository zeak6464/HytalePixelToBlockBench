# Creating Custom UI

Learn how to create user interfaces using Hytale's custom UI scripting language.

## Overview

Hytale uses a custom UI scripting language (`.ui` files) to define user interfaces. UI files use a declarative syntax similar to markup languages, with components, styles, and layouts.

## Location
`Common/UI/Custom/`

## Example from Game Files

### Common UI Styles

From `Common/UI/Custom/Common.ui`:

```1:49:Common/UI/Custom/Common.ui
$Sounds = "Sounds.ui";

// Panels
@Panel = Group {
  Background: (TexturePath: "Common/ContainerFullPatch.png", Border: 20);
};

@TitleLabel = Label {
  Style: (FontSize: 40, Alignment: Center);
};

@DefaultLabelStyle = (FontSize: 16, TextColor: #96a9be);

// Buttons
@ButtonSounds = $Sounds.@ButtonsLight;
@ButtonsCancel = $Sounds.@ButtonsCancel;
@ButtonDestructiveSounds = $Sounds.@ButtonsDestructive;

@ButtonBorder = 12;
@PrimaryButtonHeight = 44;
@SmallButtonHeight = 32;
@BigButtonHeight = 48;
@ButtonPadding = 24;
@DefaultButtonMinWidth = 172;

// Legacy aliases for backward compatibility
@DefaultButtonHeight = @PrimaryButtonHeight;
@DefaultButtonPadding = @ButtonPadding;

@DefaultButtonDefaultBackground = PatchStyle(TexturePath: "Common/Buttons/Primary.png", VerticalBorder: @ButtonBorder, HorizontalBorder: 80);
@DefaultButtonHoveredBackground = PatchStyle(TexturePath: "Common/Buttons/Primary_Hovered.png", VerticalBorder: @ButtonBorder, HorizontalBorder: 80);
@DefaultButtonPressedBackground = PatchStyle(TexturePath: "Common/Buttons/Primary_Pressed.png", VerticalBorder: @ButtonBorder, HorizontalBorder: 80);
@DefaultButtonDisabledBackground = PatchStyle(TexturePath: "Common/Buttons/Disabled.png", VerticalBorder: @ButtonBorder, HorizontalBorder: 80);

@DefaultSquareButtonDefaultBackground = PatchStyle(TexturePath: "Common/Buttons/Primary_Square.png", Border: @ButtonBorder);
@DefaultSquareButtonHoveredBackground = PatchStyle(TexturePath: "Common/Buttons/Primary_Square_Hovered.png", Border: @ButtonBorder);
@DefaultSquareButtonPressedBackground = PatchStyle(TexturePath: "Common/Buttons/Primary_Square_Pressed.png", Border: @ButtonBorder);
@DefaultSquareButtonDisabledBackground = PatchStyle(TexturePath: "Common/Buttons/Disabled.png", Border: @ButtonBorder);

@DisabledColor = #797b7c;

@DefaultButtonLabelStyle = LabelStyle(
  FontSize: 17,
  TextColor: #bfcdd5,
  RenderBold: true,
  RenderUppercase: true,
  HorizontalAlignment: Center,
  VerticalAlignment: Center
);
```

This shows UI style definitions, button configurations, and common UI patterns used throughout the game.

## Basic UI Structure

A simple UI file looks like this:

```ui
$C = "../Common.ui";

$C.@PageOverlay {
  LayoutMode: Middle;

  $C.@DecoratedContainer {
    Anchor: (Width: 600, Height: 400);

    #Title {
      $C.@Title {
        @Text = "My Custom UI";
      }
    }

    #Content {
      LayoutMode: Top;
      Padding: (Full: 16);

      Label {
        Text: "Hello, World!";
        Style: $C.@DefaultLabelStyle;
      }

      $C.@TextButton #MyButton {
        Text: "Click Me";
      }
    }
  }
}
```

## Key Concepts

### 1. Including Common UI (`Common.ui`)

Most UIs start by including the common UI library:

```ui
$C = "../Common.ui";
```

This gives you access to pre-built components like `@Container`, `@TextButton`, `@TextField`, etc.

### 2. Anchors (Positioning)

Anchors define element position and size:

```ui
Anchor: (Width: 200, Height: 100, Top: 50, Left: 50)
Anchor: (Width: 300, Right: 20, Bottom: 20)  // Relative to right/bottom
Anchor: (Width: 400, Height: 300)  // Default: top-left corner
```

**Anchor Properties:**
- `Width`, `Height` - Element dimensions
- `Top`, `Bottom`, `Left`, `Right` - Position from edges
- `Horizontal`, `Vertical` - Centering

### 3. Layout Modes

Control how children are arranged:

```ui
LayoutMode: Top;          // Vertical stack (top to bottom)
LayoutMode: Left;         // Horizontal stack (left to right)
LayoutMode: TopScrolling; // Vertical scrolling list
LayoutMode: Middle;       // Center children
```

### 4. Common UI Components

**Container:**
```ui
$C.@Container {
  Anchor: (Width: 500, Height: 600);
  
  #Title {
    // Title content
  }
  
  #Content {
    // Main content
  }
}
```

**Text Button:**
```ui
$C.@TextButton #MyButton {
  Text: "Button Text";
  Anchor: (Width: 200, Height: 44);
}
```

**Label:**
```ui
Label {
  Text: "Some text";
  Style: $C.@DefaultLabelStyle;
  Anchor: (Bottom: 10);
}
```

**Text Field:**
```ui
$C.@TextField #InputField {
  @Anchor = (Width: 300, Height: 38);
  PlaceholderText: "Enter text...";
}
```

**Number Field:**
```ui
$C.@NumberField #NumberInput {
  @Anchor = (Width: 100, Height: 38);
  Format: (
    MaxDecimalPlaces: 2,
    Step: 0.5
  );
}
```

**Checkbox:**
```ui
$C.@CheckBoxWithLabel #MyCheckbox {
  @Text = "Enable feature";
  @Checked = false;
}
```

**Dropdown:**
```ui
$C.@DropdownBox #MyDropdown {
  @Anchor = (Width: 330, Height: 32);
  NoItemsText: "No items available";
}
```

## Complete Example: Settings Page

```ui
$C = "../Common.ui";

$C.@PageOverlay {
  LayoutMode: Middle;

  $C.@DecoratedContainer {
    Anchor: (Width: 600, Height: 500);

    #Title {
      $C.@Title {
        @Text = "Settings";
      }
    }

    #Content {
      LayoutMode: Top;
      Padding: (Full: 16);

      // Settings section
      Label {
        Text: "Graphics";
        Style: (...$C.@DefaultLabelStyle, RenderBold: true);
        Anchor: (Bottom: 10);
      }

      $C.@CheckBoxWithLabel #EnableShadows {
        @Text = "Enable Shadows";
        @Checked = true;
      }

      // Volume section
      Label {
        Text: "Audio";
        Style: (...$C.@DefaultLabelStyle, RenderBold: true);
        Anchor: (Bottom: 10, Top: 20);
      }

      Group {
        LayoutMode: Left;
        Anchor: (Bottom: 10);

        Label {
          Text: "Master Volume:";
          Style: $C.@DefaultLabelStyle;
          Anchor: (Right: 10, Vertical: Center);
        }

        $C.@NumberField #VolumeInput {
          @Anchor = (Width: 100, Height: 38);
          Format: (
            MaxDecimalPlaces: 0,
            Step: 1
          );
        }
      }

      // Buttons
      Group {
        LayoutMode: Left;
        Anchor: (Top: 30);

        $C.@TextButton #SaveButton {
          Text: "Save";
          Anchor: (Right: 10);
        }

        $C.@CancelTextButton #CancelButton {
          Text: "Cancel";
        }
      }
    }
  }
}

$C.@BackButton {}
```

## HUD Elements

For HUD elements (overlays during gameplay), use simpler structure:

```ui
Group {
  Anchor: (Top: 20, Left: 20);

  Group #TimerContainer {
    Background: #000000(0.2);
    Padding: (Horizontal: 20, Vertical: 10);
    LayoutMode: Left;

    TimerLabel #TimeLabel {
      Style: (FontSize: 32, Alignment: Center);
      Seconds: 300;  // 5 minutes
    }
  }
}
```

## Styles

**Label Styles:**
```ui
Style: (
  FontSize: 16,
  TextColor: #96a9be,
  RenderBold: true,
  Alignment: Center
)
```

**Button Styles:**
```ui
Style: $C.@DefaultTextButtonStyle;        // Primary button
Style: $C.@SecondaryTextButtonStyle;      // Secondary button
Style: $C.@CancelTextButtonStyle;         // Cancel/destructive button
Style: $C.@SmallDefaultTextButtonStyle;   // Small button
```

## Text Colors

Use hex colors with optional opacity:

```ui
TextColor: #ffffff;           // White
TextColor: #96a9be;           // Gray
TextColor: #ff0000;           // Red
TextColor: #ffffff(0.8);      // White with 80% opacity
TextColor: #000000(0.2);      // Black with 20% opacity
```

## Text Localization

Use translation keys for text:

```ui
Text: %server.customUI.myPage.title;
PlaceholderText: %server.customUI.myPage.placeholder;
```

Then define translations in language files:
```
server.customUI.myPage.title = "My Page"
server.customUI.myPage.placeholder = "Enter value..."
```

## Common Patterns

### Scrolling List
```ui
Group #ItemList {
  FlexWeight: 1;
  LayoutMode: TopScrolling;
  ScrollbarStyle: $C.@DefaultScrollbarStyle;
  
  // Items will scroll here
}
```

### Horizontal Button Group
```ui
Group {
  LayoutMode: Left;
  Anchor: (Bottom: 20);

  $C.@TextButton #Button1 {
    Text: "Option 1";
    Anchor: (Right: 10);
  }

  $C.@TextButton #Button2 {
    Text: "Option 2";
  }
}
```

### Two-Column Layout
```ui
Group {
  LayoutMode: Left;

  Group #LeftColumn {
    FlexWeight: 1;
    LayoutMode: Top;
    Anchor: (Right: 10);
    // Left content
  }

  Group #RightColumn {
    FlexWeight: 1;
    LayoutMode: Top;
    // Right content
  }
}
```

## Tips for Creating UIs

1. **Start with Common.ui** - Use `$C = "../Common.ui"` to get pre-built components
2. **Use existing examples** - Copy from `Common/UI/Custom/Pages/` and modify
3. **Test anchor positions** - Start with simple positioning, then adjust
4. **Use LayoutMode** - Let the layout system handle spacing when possible
5. **Reference textures** - Use existing UI textures from `Common/UI/Custom/Common/`
6. **Keep IDs unique** - Use descriptive IDs for elements (`#MyButton`, `#PlayerName`)
7. **Test responsiveness** - Test at different resolutions
8. **Use FlexWeight** - For flexible sizing in layouts

## Available UI Textures

Common UI textures are in `Common/UI/Custom/Common/Buttons/`:
- `Primary.png`, `Primary_Hovered.png`, `Primary_Pressed.png`
- `Secondary.png`, `Secondary_Hovered.png`, `Secondary_Pressed.png`
- `Disabled.png`
- `ContainerFullPatch.png`, `ContainerPatch.png`
- `Dropdown.png`, `DropdownHovered.png`
- And many more...

## Limitations

- UI files are client-side only
- No custom scripting in `.ui` files (logic handled server-side)
- Limited to predefined component types
- Animation support is limited

---

**Previous:** [Special Items](08_Special_Items.md) | **Next:** [Audio & VFX](10_Audio_and_VFX.md)
